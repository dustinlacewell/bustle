"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[288],{1379:(e,s,t)=>{t.r(s),t.d(s,{default:()=>v});var a=t(797),l=t(1410),n=t(6540),r=t(7143);const o={container:"container_o7Yl",controls:"controls_jyND",searchBox:"searchBox_TW2w",listSelector:"listSelector_Z_us",tableContainer:"tableContainer_xMuk",tableWrapper:"tableWrapper_I7nB",characterTable:"characterTable_qX8S",ascending:"ascending_kiQZ",descending:"descending_ollI",stats:"stats_EpIk",loading:"loading_ljD1",noResults:"noResults_Yltc",modalOverlay:"modalOverlay_ceVI",modalContent:"modalContent_MQIz",modalClose:"modalClose_n8Og",modalHeader:"modalHeader_idG9",modalHeaderLeft:"modalHeaderLeft_nnVi",modalTitle:"modalTitle_sFgM",modalTags:"modalTags_Jswo",modalTag:"modalTag_QSPm",modalLayout:"modalLayout_HCVl",modalInfoColumn:"modalInfoColumn_lBCZ",modalImageColumn:"modalImageColumn_xTIH",modalImage:"modalImage_IUsW",modalInfoGrid:"modalInfoGrid_jajk",modalInfoItem:"modalInfoItem_kr7S",modalInfoLabel:"modalInfoLabel_uilb",modalInfoValue:"modalInfoValue_BeYC",modalDescription:"modalDescription_SEap",selectedListDescription:"selectedListDescription_PIL8",tagFilter:"tagFilter_wkF_",tagButton:"tagButton_BtJJ",tagButtonActive:"tagButtonActive_RWpc",clickableRow:"clickableRow_Vbqf",imagePreview:"imagePreview_Gzu8",fadeIn:"fadeIn_sNuY",imagePreviewExit:"imagePreviewExit_1hPN",fadeOut:"fadeOut_neFD"};var i=t(4848);const c=e=>{let{urls:s}=e;return(0,i.jsx)("div",{style:{display:"none"},children:s.map(((e,s)=>(0,i.jsx)("img",{src:e,alt:""},s)))})},d=e=>{let{mods:s,sortConfig:t,onSort:a,onSelectMod:l}=e;const[r,d]=(0,n.useState)(null),[m,u]=(0,n.useState)(!1),[h,x]=(0,n.useState)([]),f=(0,n.useRef)(null),p=(0,n.useRef)(null),g=(0,n.useRef)(null),j=(0,n.useRef)({x:0,y:0});(0,n.useEffect)((()=>{if(!g.current)return;const e=g.current.querySelectorAll("tr"),t=new Set,a=new IntersectionObserver((e=>{let a=!1;if(e.forEach((e=>{const s=e.target.dataset.modId;s&&(e.isIntersecting?(t.add(s),a=!0):t.has(s)&&(t.delete(s),a=!0))})),a){const e=s.filter((e=>t.has(e.id)));x(e)}}),{root:null,rootMargin:"100px",threshold:.1});return e.forEach((e=>a.observe(e))),()=>a.disconnect()}),[s]);const v=e=>t&&t.key===e?o[t.direction]:"";(0,n.useEffect)((()=>{const e=e=>{j.current={x:e.clientX,y:e.clientY},f.current&&N(e.clientX,e.clientY)};return window.addEventListener("mousemove",e),()=>window.removeEventListener("mousemove",e)}),[]);const N=(e,s)=>{if(!f.current)return;let t=e+20;t+220>window.innerWidth&&(t=e-220-20),f.current.style.top=s-100+"px",f.current.style.left=`${t}px`};(0,n.useEffect)((()=>{if(!g.current)return;const e=()=>{r&&(u(!0),setTimeout((()=>{d(null),u(!1)}),200))};return g.current.addEventListener("mouseleave",e),()=>{g.current&&g.current.removeEventListener("mouseleave",e)}}),[r]),(0,n.useEffect)((()=>{if(!r)return;const e=()=>{r&&(u(!0),setTimeout((()=>{d(null),u(!1)}),200))};return window.addEventListener("scroll",e,{passive:!0}),()=>window.removeEventListener("scroll",e)}),[r]);const I=h.filter((e=>e.previewUrl)).map((e=>e.previewUrl));return(0,i.jsxs)("div",{className:o.tableWrapper,children:[(0,i.jsx)(c,{urls:I}),(0,i.jsxs)("table",{ref:p,className:o.characterTable,children:[(0,i.jsx)("thead",{children:(0,i.jsxs)("tr",{children:[(0,i.jsx)("th",{className:v("title"),onClick:()=>a("title"),children:"Title"}),(0,i.jsx)("th",{className:v("author"),onClick:()=>a("author"),children:"Author"}),(0,i.jsx)("th",{className:v("id"),onClick:()=>a("id"),children:"ID"}),(0,i.jsx)("th",{className:v("upvotes"),onClick:()=>a("upvotes"),children:"Upvotes"}),(0,i.jsx)("th",{className:v("downvotes"),onClick:()=>a("downvotes"),children:"Downvotes"}),(0,i.jsx)("th",{className:v("score"),onClick:()=>a("score"),children:"Score"}),(0,i.jsx)("th",{className:v("subscriptions"),onClick:()=>a("subscriptions"),children:"Subscriptions"}),(0,i.jsx)("th",{className:v("favorites"),onClick:()=>a("favorites"),children:"Favorites"}),(0,i.jsx)("th",{className:v("created"),onClick:()=>a("created"),children:"Created"}),(0,i.jsx)("th",{className:v("updated"),onClick:()=>a("updated"),children:"Updated"}),(0,i.jsx)("th",{className:v("decay"),onClick:()=>a("decay"),title:"Time in years since the mod was last updated",children:"Decay"}),(0,i.jsx)("th",{className:v("comments"),onClick:()=>a("comments"),children:"Comments"})]})}),(0,i.jsx)("tbody",{ref:g,children:s.map((e=>(0,i.jsxs)("tr",{className:o.clickableRow,onClick:()=>l(e),onMouseEnter:()=>(e=>{m&&u(!1),requestAnimationFrame((()=>{d(e),f.current&&N(j.current.x,j.current.y)}))})(e),"data-mod-id":e.id,children:[(0,i.jsx)("td",{children:e.title}),(0,i.jsx)("td",{children:e.author}),(0,i.jsx)("td",{children:e.id}),(0,i.jsx)("td",{children:e.upvotes}),(0,i.jsx)("td",{children:e.downvotes}),(0,i.jsx)("td",{children:parseFloat(e.score.toString()).toFixed(2)}),(0,i.jsx)("td",{children:e.subscriptions}),(0,i.jsx)("td",{children:e.favorites}),(0,i.jsx)("td",{children:e.created}),(0,i.jsx)("td",{children:e.updated}),(0,i.jsx)("td",{children:e.decay}),(0,i.jsx)("td",{children:e.comments})]},e.id)))})]}),r&&r.previewUrl&&(0,i.jsx)("div",{ref:f,className:m?`${o.imagePreview} ${o.imagePreviewExit}`:o.imagePreview,style:{position:"fixed"},children:(0,i.jsx)("img",{src:r.previewUrl,alt:r.title})})]})},m=e=>{let{mod:s,onClose:t}=e;if(!s)return null;return(0,n.useEffect)((()=>{const e=e=>{"Escape"===e.key&&t()};return window.addEventListener("keydown",e),()=>window.removeEventListener("keydown",e)}),[t]),(0,i.jsx)("div",{className:o.modalOverlay,onClick:e=>{e.target===e.currentTarget&&t()},children:(0,i.jsxs)("div",{className:o.modalContent,children:[(0,i.jsx)("button",{className:o.modalClose,onClick:t,children:"\xd7"}),(0,i.jsxs)("div",{className:o.modalHeader,children:[(0,i.jsxs)("div",{className:o.modalHeaderLeft,children:[(0,i.jsx)("h2",{className:o.modalTitle,children:s.title}),(0,i.jsxs)("div",{children:["by ",s.author]})]}),s.tags&&s.tags.length>0&&(0,i.jsx)("div",{className:o.modalTags,children:s.tags.map(((e,s)=>(0,i.jsx)("span",{className:o.modalTag,children:e},s)))})]}),(0,i.jsxs)("div",{className:o.modalLayout,children:[(0,i.jsx)("div",{className:o.modalInfoColumn,children:(0,i.jsxs)("div",{className:o.modalInfoGrid,children:[(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"ID"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.publishedFileId})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Views"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.uniqueViews})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Votes"}),(0,i.jsxs)("span",{className:o.modalInfoValue,children:[s.upvotes," / ",s.downvotes]})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Score"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:parseFloat(s.score.toString()).toFixed(2)})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Subscriptions"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.subscriptions})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Favorites"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.favorites})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Created"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.created})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Updated"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.updated})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Comments"}),(0,i.jsx)("span",{className:o.modalInfoValue,children:s.comments})]}),(0,i.jsxs)("div",{className:o.modalInfoItem,children:[(0,i.jsx)("span",{className:o.modalInfoLabel,children:"Workshop"}),(0,i.jsx)("a",{href:`https://steamcommunity.com/sharedfiles/filedetails/?id=${s.publishedFileId}`,target:"_blank",rel:"noopener noreferrer",children:"View on Steam"})]})]})}),s.previewUrl&&(0,i.jsx)("div",{className:o.modalImageColumn,children:(0,i.jsx)("img",{src:s.previewUrl,alt:s.title,className:o.modalImage})})]}),s.description&&(0,i.jsxs)("div",{className:o.modalDescription,children:[(0,i.jsx)("h3",{children:"Description"}),(0,i.jsx)("div",{children:s.description})]})]})})},u=e=>{let{searchTerm:s,setSearchTerm:t,communityLists:a,selectedList:l,setSelectedList:n}=e;return(0,i.jsxs)("div",{className:o.controls,children:[(0,i.jsx)("div",{className:o.searchBox,children:(0,i.jsx)("input",{type:"text",placeholder:"Search mods...",value:s,onChange:e=>t(e.target.value)})}),(0,i.jsx)("div",{className:o.listSelector,children:(0,i.jsxs)("select",{value:l,onChange:e=>n(e.target.value),children:[(0,i.jsx)("option",{value:"",title:"Every mod on the workshop",children:"All Mods"}),a.map((e=>(0,i.jsx)("option",{value:e.filename,title:e.description,children:e.displayName},e.filename)))]})})]})},h=e=>{let{availableTags:s,selectedTags:t,onTagToggle:a,onClearTags:l}=e;return(0,i.jsxs)("div",{className:o.tagFilter,children:[(0,i.jsx)("button",{className:`${o.tagButton} ${0===t.length?o.tagButtonActive:""}`,onClick:l,children:"All"}),s.map((e=>(0,i.jsx)("button",{className:`${o.tagButton} ${t.includes(e)&&1===t.length?o.tagButtonActive:""}`,onClick:()=>a(e),children:e},e)))]})},x=function(e,s){void 0===s&&(s=null);const[t,a]=(0,n.useState)(s);return{items:(0,n.useMemo)((()=>{const s=[...e];return null!==t&&s.sort(((e,s)=>{const a=e[t.key],l=s[t.key];if("number"==typeof a&&"number"==typeof l)return"ascending"===t.direction?a-l:l-a;const n=String(a).toLowerCase(),r=String(l).toLowerCase();return n<r?"ascending"===t.direction?-1:1:n>r?"ascending"===t.direction?1:-1:0})),s}),[e,t]),requestSort:e=>{let s="descending";t&&t.key===e&&"descending"===t.direction&&(s="ascending"),a({key:e,direction:s})},sortConfig:t}},f=async()=>{try{const s=await fetch("/mods.json");if(!s.ok)return console.error("Failed to fetch mods:",s.statusText),[];const t=await s.text(),a=t.indexOf("[");if(-1===a)return console.error("Could not find start of array in mods.json"),[];try{const e=t.substring(a),s=JSON.parse(e);return Array.isArray(s)?s:(console.error("Parsed data is not an array:",s),[])}catch(e){return console.error("Error parsing JSON array:",e),[]}}catch(s){return console.error("Error fetching mods:",s),[]}},p=async()=>{const e=await fetch("https://raw.githubusercontent.com/dustinlacewell/bustle-community-lists/main/lists.txt");return(await e.text()).split("\n").filter((e=>""!==e.trim())).map((e=>{const[s,t]=e.split(" ",2),a=e.substring(s.length+1),l=s.replace(/\.txt$/,""),n=l.charAt(0).toUpperCase()+l.slice(1);return{filename:s,baseName:l,displayName:n,description:a}}))},g=e=>String(e).trim(),j=e=>{const s=new Date,t=new Date(1e3*e);return((s.getTime()-t.getTime())/315576e5).toFixed(2)},v=()=>{const[e,s]=(0,n.useState)([]),[t,c]=(0,n.useState)([]),[v,N]=(0,n.useState)(""),[I,w]=(0,n.useState)(""),[y,C]=(0,n.useState)([]),[b,k]=(0,n.useState)(!0),[S,L]=(0,n.useState)(null),[T,_]=(0,n.useState)([]),[E,F]=(0,n.useState)(["Character"]);(0,n.useEffect)((()=>{(async()=>{try{k(!0);const[e,t]=await Promise.all([f(),p()]),a=e.map((e=>({...e,decay:j(e.timeUpdated)}))),l=new Set;a.forEach((e=>{e.tags&&Array.isArray(e.tags)&&e.tags.forEach((e=>l.add(e)))})),s(a),c(t),_(Array.from(l).sort()),k(!1)}catch(e){console.error("Error loading data:",e),k(!1)}})()}),[]),(0,n.useEffect)((()=>{(async()=>{if(v)try{const e=await(async e=>{const s=await fetch(`https://raw.githubusercontent.com/dustinlacewell/bustle-community-lists/main/lists/${e}`);return(await s.text()).split("\n").filter((e=>""!==e.trim())).map((e=>e.trim()))})(v);console.log(`Loaded ${e.length} items from list ${v}:`,e),C(e)}catch(e){console.error(`Error loading list ${v}:`,e),C([])}else C([])})()}),[v]);const A=(0,n.useCallback)((e=>{F((s=>s.includes(e)&&1===s.length?[]:[e]))}),[]),V=(0,n.useCallback)((()=>{F([])}),[]),$=(0,n.useMemo)((()=>{const s=e.filter((e=>""===v||y.some((s=>g(s)===g(e.publishedFileId))))),t=e.filter((e=>{const s=""===I||e.title.toLowerCase().includes(I.toLowerCase())||e.author.toLowerCase().includes(I.toLowerCase())||e.id.includes(I),t=""===v||y.some((s=>g(s)===g(e.publishedFileId))),a=0===E.length||e.tags&&E.some((s=>e.tags.includes(s)));return s&&t&&a}));return v&&y.length>0&&console.log(`Filtered ${t.length} mods from ${s.length} in list`),{filtered:t,listTotal:s.length}}),[e,I,v,y,E]),{items:B,requestSort:D,sortConfig:P}=x($.filtered,{key:"subscriptions",direction:"descending"}),M=(0,n.useCallback)((e=>{L(e)}),[]),U=(0,n.useCallback)((()=>{L(null)}),[]),{siteConfig:R}=(0,a.A)();return(0,i.jsxs)(l.A,{description:"Bustle Community Mod Lists",children:[(0,i.jsx)(r.A,{children:(0,i.jsx)("link",{rel:"stylesheet",href:"https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap"})}),(0,i.jsxs)("div",{className:o.container,children:[(0,i.jsx)("h1",{children:"Community Mod Lists"}),b?(0,i.jsx)("div",{className:o.loading,children:"Loading mod data..."}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(u,{searchTerm:I,setSearchTerm:w,communityLists:t,selectedList:v,setSelectedList:N}),(0,i.jsx)(h,{availableTags:T,selectedTags:E,onTagToggle:A,onClearTags:V}),(0,i.jsx)("div",{className:o.selectedListDescription,children:v?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h2",{children:[t.find((e=>e.filename===v))?.displayName,"\xa0(",$.listTotal,")"]}),(0,i.jsx)("p",{children:t.find((e=>e.filename===v))?.description})]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("h2",{children:["All Mods (",e.length,")"]}),(0,i.jsx)("p",{children:"Every mod on the workshop"})]})}),(0,i.jsx)("div",{className:o.stats,children:B.length===$.listTotal?`All ${B.length} mods shown.`:B.length>0?`${B.length} of ${$.listTotal} total mods shown.`:"No mods match the current filters."}),B.length>0?(0,i.jsx)("div",{className:o.tableContainer,children:(0,i.jsx)(d,{mods:B,sortConfig:P,onSort:D,onSelectMod:M})}):(0,i.jsx)("div",{className:o.noResults,children:(0,i.jsx)("p",{children:"Try adjusting your filters to see more mods."})}),S&&(0,i.jsx)(m,{mod:S,onClose:U})]})]})]})}}}]);